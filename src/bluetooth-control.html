<dom-module id="bluetooth-control">
    <template>
        <style include="iron-flex iron-flex-alignment">
            :host {
                display: block;
                /*--iron-icon-height: 40px;
                --iron-icon-width: 40px;*/
            }
            
            div.pad {
                width: 230px;
            }

            paper-button {
                text-align: center;
                background-color: #4CB6BA;
                color: #FFF;

                height: 55px;
                margin: 5px;
                width: 50%;
            }

            paper-button.custom-button {
                width: 150px;
            }

            #leftPad iron-icon {
                --iron-icon-height: 50px;
                --iron-icon-width: 50px;
            }

            #rightPad iron-icon {
                --iron-icon-height: 30px;
                --iron-icon-width: 30px;
            }
        </style>


        <div class="horizontal layout" id="containerButtons">
            <div class="pad" id="leftPad">
                <div class="horizontal center-justified layout">
                    <paper-button id="buttonUp" raised class="">
                        <iron-icon icon="hardware:keyboard-arrow-up"></iron-icon>
                    </paper-button>
                </div>
                <div class="horizontal center-justified layout">
                    <paper-button id="buttonLeft" raised class="">
                        <iron-icon icon="hardware:keyboard-arrow-left"></iron-icon>
                    </paper-button>
                    <paper-button id="buttonRight" raised class="">
                        <iron-icon icon="hardware:keyboard-arrow-right"></iron-icon>
                    </paper-button>
                </div>
                <div class="horizontal center-justified layout">
                    <paper-button id="buttonDown" raised class="">
                        <iron-icon icon="hardware:keyboard-arrow-down"></iron-icon>
                    </paper-button>
                </div>
            </div>

            <span class="flex"></span>

            <div class="vertical layout">
                <paper-button id="buttonC1" raised class="custom-button">{{keyBinding.c1text}}</paper-button>
                <paper-button id="buttonC2" raised class="custom-button">{{keyBinding.c2text}}</paper-button>
                <paper-button id="buttonC3" raised class="custom-button">{{keyBinding.c3text}}</paper-button>
            </div>

            <span class="flex"></span>

            <div class="pad" id="rightPad">
                <div class="horizontal center-justified layout">
                    <paper-button id="buttonTriangle" raised class="">
                        <iron-icon icon="icons:change-history"></iron-icon>
                    </paper-button>
                </div>
                <div class="horizontal center-justified layout">
                    <paper-button id="buttonSquare" raised class="">
                        <iron-icon icon="image:crop-din"></iron-icon>
                    </paper-button>
                    <paper-button id="buttonCircle" raised class="">
                        <iron-icon icon="icons:radio-button-unchecked"></iron-icon>
                    </paper-button>
                </div>
                <div class="horizontal center-justified layout">
                    <paper-button id="buttonCross" raised class="">
                        <iron-icon icon="icons:clear"></iron-icon>
                    </paper-button>
                </div>
            </div>
        </div>

    </template>



    <script>
        Polymer({
            is: 'bluetooth-control',
            properties: {
                keyBinding: {
                    type: Object
                }
            },

            ready: function() {
                thisBtCtr = this;

                this.$.containerButtons.style.marginTop = ((window.innerHeight - 60 - 195) / 2) + 'px';
                
                this.setupEventListener();
            },

            setupEventListener: function() {
                this.$.buttonUp.addEventListener('touchstart', this.onClickUp);
                this.$.buttonLeft.addEventListener('touchstart', this.onClickLeft);
                this.$.buttonRight.addEventListener('touchstart', this.onClickRight);
                this.$.buttonDown.addEventListener('touchstart', this.onClickDown);

                this.$.buttonTriangle.addEventListener('touchstart', this.onClickTriangle);
                this.$.buttonSquare.addEventListener('touchstart', this.onClickSquare);
                this.$.buttonCircle.addEventListener('touchstart', this.onClickCircle);
                this.$.buttonCross.addEventListener('touchstart', this.onClickCross);

                this.$.buttonC1.addEventListener('touchstart', this.onClickC1);
                this.$.buttonC2.addEventListener('touchstart', this.onClickC2);
                this.$.buttonC3.addEventListener('touchstart', this.onClickC3);
            },

            onClickUp: function() {
                // bluetoothSerial.write(thisBtCtr.get('keyBinding.up'), thisBtCtr.onWrite, thisBtCtr.onError);

                setInterval(function() {
                    bluetoothSerial.write(thisBtCtr.get('keyBinding.up'), thisBtCtr.onWrite, thisBtCtr.onError);
                }, 200);
            },

            onClickLeft: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.left'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickRight: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.right'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickDown: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.down'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickTriangle: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.triangle'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickSquare: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.square'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickCircle: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.circle'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickCross: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.cross'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickC1: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.c1'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickC2: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.c2'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

            onClickC3: function() {
                bluetoothSerial.write(thisBtCtr.get('keyBinding.c3'), thisBtCtr.onWrite, thisBtCtr.onError);
            },

        });
    </script>
</dom-module>
